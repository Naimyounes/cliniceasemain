# โ ุชู ุญู ูุดููุฉ IntegrityError ุจูุฌุงุญ!

## ๐ ุงููุดููุฉ ุงูุฃุตููุฉ:
```
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prescription.medications
```

## ๐ฏ ุณุจุจ ุงููุดููุฉ:
- ูุงู ููุงู ุนููุฏ `medications` ูุฏูู ูู ุฌุฏูู `prescription` ูุทููุจ (NOT NULL)
- ุงููููุฐุฌ ุงูุฌุฏูุฏ ูุง ูุญุชูู ุนูู ูุฐุง ุงูุนููุฏ
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฏููุฉ ูุงูุช ุชุญุชูู ุนูู ุจููุฉ ูุฎุชููุฉ

## ๐ง ุงูุญู ุงููุทุจู:

### 1. ุชูุธูู ุงููููุฐุฌ:
- ุฅุฒุงูุฉ ุนููุฏ `medications` ูู ูููุฐุฌ `Prescription`
- ุงูุงุนุชูุงุฏ ุนูู ุฌุฏูู `PrescriptionMedication` ุงููููุตู

### 2. ุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฏููุฉ
- ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุจุงูุจููุฉ ุงูุตุญูุญุฉ
- ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ

### 3. ุงูุชุญูู ูู ุงูุจููุฉ ุงูุฌุฏูุฏุฉ:
```sql
-- ุฌุฏูู prescription ุงูุฌุฏูุฏ
CREATE TABLE prescription (
    id INTEGER PRIMARY KEY,
    visit_id INTEGER NOT NULL UNIQUE,
    pdf_file VARCHAR(100),
    created_at DATETIME NOT NULL,
    FOREIGN KEY (visit_id) REFERENCES visit (id)
);

-- ุฌุฏูู prescription_medication ุงููููุตู
CREATE TABLE prescription_medication (
    id INTEGER PRIMARY KEY,
    prescription_id INTEGER NOT NULL,
    medication_id INTEGER NOT NULL,
    instructions VARCHAR(200),
    FOREIGN KEY (prescription_id) REFERENCES prescription (id),
    FOREIGN KEY (medication_id) REFERENCES medication (id)
);
```

## โ ุงููุชูุฌุฉ:
- **ุงูุชุทุจูู ูุนูู ุจุฏูู ุฃุฎุทุงุก**
- **ุฅูุดุงุก ุงููุตูุงุช ูุนูู ุจุดูู ุตุญูุญ**
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุธูุฉ ููุญุณูุฉ**

## ๐ ุงูููุฒุงุช ุงููุชุงุญุฉ ุงูุขู:

### ููุทุจูุจ:
- โ ุฅุฏุงุฑุฉ ุงูุฃุฏููุฉ
- โ ุงููุตูุงุช ุงููุณุจูุฉ
- โ ุฅูุดุงุก ูุตูุงุช ุฌุฏูุฏุฉ
- โ ุงูุชูููู ุงูุชูุงุนูู
- โ ููุญุฉ ุชุญูู ูุญุณูุฉ
- โ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

### ููุณูุฑุชูุฑ:
- โ ููุญุฉ ุชุญูู ูุญุณูุฉ
- โ ุฅุฏุงุฑุฉ ุงููุฑุถู
- โ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
- โ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

## ๐ ุจูุงูุงุช ุงูุฏุฎูู:
- **ุงูุทุจูุจ:** `doctor` / `doctor123`
- **ุงูุณูุฑุชูุฑ:** `secretary` / `secretary123`

## ๐ ุงูุฑูุงุจุท:
- **ุงูุชุทุจูู:** http://localhost:5000
- **ุดุงุดุฉ ุงูุงูุชุธุงุฑ:** http://localhost:5000/waiting-room

## ๐ ุงููููุงุช ุงููุถุงูุฉ ูุญู ุงููุดููุฉ:
- `force_create_db.py` - ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูููุฉ
- `test_db.py` - ุงุฎุชุจุงุฑ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `init_db.py` - ุณูุฑูุจุช ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `check_db.py` - ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุชุทุจูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุฌููุน ุงูููุฒุงุช ุงููุทููุจุฉ ุชุนูู ุจุดูู ูุซุงูู:
- ุฅุฏุงุฑุฉ ุงูุฃุฏููุฉ โ
- ุงููุตูุงุช ุงููุณุจูุฉ โ
- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ โ
- ุงูุชุตููู ุงูุนุตุฑู โ
- ุงูุชุฌุงูุจ ุงููุงูู โ
- ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ โ

---

**ููุงุญุธุฉ:** ูู ุญุงูุฉ ุธููุฑ ุฃู ูุดุงูู ูุณุชูุจููุฉุ ูููู ุงุณุชุฎุฏุงู `force_create_db.py` ูุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช.